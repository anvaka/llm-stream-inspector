(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function T(t){return!t||typeof t!="object"?"unknown":t.choices&&Array.isArray(t.choices)?"openai":t.type&&typeof t.type=="string"&&(t.type.includes("content_block")||t.type.includes("message"))?"anthropic":t.candidates&&Array.isArray(t.candidates)?"google":"unknown"}function w(t,e){try{switch(e){case"openai":return A(t);case"anthropic":return _(t);case"google":return M(t);default:return B(t)}}catch{return""}}function A(t){var n,r,o;const e=(n=t.choices)==null?void 0:n[0];return e?(r=e.delta)!=null&&r.content?e.delta.content:(o=e.message)!=null&&o.content?e.message.content:"":""}function _(t){var e,n;return t.type==="content_block_delta"&&((e=t.delta)!=null&&e.text)?t.delta.text:t.type==="content_block_start"&&((n=t.content_block)!=null&&n.text)?t.content_block.text:""}function M(t){var r,o;const e=(r=t.candidates)==null?void 0:r[0];if(!e)return"";const n=(o=e.content)==null?void 0:o.parts;return Array.isArray(n)?n.map(s=>s.text||"").join(""):""}function B(t){const e=[["content"],["text"],["delta","content"],["delta","text"],["message","content"],["choices",0,"delta","content"],["choices",0,"text"]];for(const n of e){const r=R(t,n);if(typeof r=="string")return r}return""}function R(t,e){let n=t;for(const r of e){if(n==null)return;n=n[r]}return n}function $(t,e){var r,o,s,c,l;const n={provider:e,model:null,id:null,chunkCount:t.length,finishReason:null};for(const i of t)!i||typeof i!="object"||(n.model||(n.model=i.model||((r=i.message)==null?void 0:r.model)||null),n.id||(n.id=i.id||((o=i.message)==null?void 0:o.id)||null),e==="openai"&&((c=(s=i.choices)==null?void 0:s[0])!=null&&c.finish_reason)&&(n.finishReason=i.choices[0].finish_reason),e==="anthropic"&&i.type==="message_stop"&&(n.finishReason="stop"),e==="anthropic"&&((l=i.delta)!=null&&l.stop_reason)&&(n.finishReason=i.delta.stop_reason));return n}function H(t){const e=[],n=[];let r=null;if(!t||typeof t!="string")return{content:"",metadata:null,errors:["No input provided"]};const o=t.split(`
`);for(let f=0;f<o.length;f++){const p=o[f],P=f+1;if(!p.trim())continue;const I=j(p);for(const m of I){const u=m.trim();if(u==="[DONE]"||!u||u.startsWith("event:")||u.startsWith("id:")||u.startsWith("retry:"))continue;const x=S(u);x.success?(n.push(x.data),r||(r=T(x.data))):u.startsWith("{")&&e.push({line:P,message:`Invalid JSON - ${W(u,40)}`,raw:u})}if(!p.includes("data:")&&p.trim().startsWith("{")){const m=S(p.trim());m.success&&(n.push(m.data),r||(r=T(m.data)))}}const s=r||"unknown",l=n.map(f=>w(f,s)).join(""),i=n.length>0?$(n,s):null;return n.length===0&&e.length===0?{content:"",metadata:null,errors:[{line:null,message:"No valid SSE data found",raw:null}]}:{content:l,metadata:i,errors:e.length>0?e:null}}function j(t){const e=[],n="data:";let r=0;for(;r<t.length;){const o=t.indexOf(n,r);if(o===-1)break;const s=o+n.length,c=t.indexOf(n,s),l=c===-1?t.length:c;e.push(t.slice(s,l)),r=l}return e}function S(t){try{return{success:!0,data:JSON.parse(t)}}catch{return{success:!1,data:null}}}function W(t,e){return t.length<=e?t:t.slice(0,e)+"..."}const a=document.getElementById("sse-input"),O=document.getElementById("output"),E=document.getElementById("metadata"),h=document.getElementById("errors"),D=document.getElementById("clear-btn"),d=document.getElementById("copy-btn"),g=document.getElementById("line-numbers");let y="";function F(t){return{openai:"OpenAI",anthropic:"Anthropic",google:"Google",unknown:"Unknown"}[t]||t}function C(t){if(!t){E.classList.add("hidden");return}const e=[];e.push(`<span><strong>Provider:</strong> ${F(t.provider)}</span>`),t.model&&e.push(`<span><strong>Model:</strong> ${k(t.model)}</span>`),e.push(`<span><strong>Chunks:</strong> ${t.chunkCount}</span>`),t.finishReason&&e.push(`<span><strong>Finish:</strong> ${k(t.finishReason)}</span>`),E.innerHTML=e.join(""),E.classList.remove("hidden")}function v(t){if(!t||t.length===0){h.classList.add("hidden");return}const e=5,n=t.slice(0,e),r=t.length-e;if(h.innerHTML="",n.forEach(o=>{const s=document.createElement("div");if(s.className="error-item",o.line){const c=document.createElement("button");c.className="error-line-link",c.textContent=`Line ${o.line}`,c.onclick=()=>G(o.line),s.appendChild(c);const l=document.createElement("span");l.textContent=`: ${o.message}`,s.appendChild(l)}else s.textContent=o.message;h.appendChild(s)}),r>0){const o=document.createElement("div");o.className="error-more",o.textContent=`...and ${r} more error${r>1?"s":""}`,h.appendChild(o)}h.classList.remove("hidden")}function G(t){var l;const n=a.value.split(`
`);let r=0;for(let i=0;i<t-1&&i<n.length;i++)r+=n[i].length+1;const o=r+(((l=n[t-1])==null?void 0:l.length)||0);a.focus(),a.setSelectionRange(r,o);const s=parseInt(getComputedStyle(a).lineHeight)||20,c=(t-3)*s;a.scrollTop=Math.max(0,c),J(t)}function J(t){const e=g.querySelectorAll(".line-num");e.forEach(r=>r.classList.remove("highlighted"));const n=e[t-1];n&&(n.classList.add("highlighted"),setTimeout(()=>n.classList.remove("highlighted"),2e3))}function L(t){if(y=t,!t){O.innerHTML='<span class="placeholder">Output will appear here</span>';return}O.textContent=t}function b(){const t=a.value,e=t?t.split(`
`).length:1;if(g.children.length===e)return;const r=document.createDocumentFragment();for(let o=1;o<=e;o++){const s=document.createElement("div");s.className="line-num",s.textContent=o,r.appendChild(s)}g.innerHTML="",g.appendChild(r)}function q(){g.scrollTop=a.scrollTop}function N(){const t=a.value;if(!t.trim()){C(null),v(null),L("");return}const e=H(t);C(e.metadata),v(e.errors),L(e.content)}function k(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}function K(t,e){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>t.apply(this,r),e)}}const U=K(N,150);a.addEventListener("input",()=>{b(),U()});a.addEventListener("scroll",q);D.addEventListener("click",()=>{a.value="",b(),C(null),v(null),L(""),a.focus()});d.addEventListener("click",async()=>{if(y)try{await navigator.clipboard.writeText(y);const t=d.textContent;d.textContent="Copied",setTimeout(()=>{d.textContent=t},1500)}catch{const t=document.createElement("textarea");t.value=y,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t);const e=d.textContent;d.textContent="Copied",setTimeout(()=>{d.textContent=e},1500)}});b();a.value&&N();
